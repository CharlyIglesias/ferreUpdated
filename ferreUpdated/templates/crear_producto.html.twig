{% extends "base2.html.twig" %}

{% block title %}Ferre Los Pinos{% endblock %}
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="/style/createProduct.css">
{% endblock %}
{% block body %}

<div class="page-container">
    <div id="includedContent">
        <h1 style="margin-left: 12%;">Crear Producto</h1>
    </div>
    {{ form_start(form) }}

    <div class="row mb-3 mt-3">
        <div class="col-lg-12 col-xl-6">
            <div class="row">
                <input id="inputFile" type='file' onchange="readURL(this);" style="display: none;" />
                    <img style="max-width: 90%; margin-left: auto; margin-right: auto;" id="blah" class="image" src="https://res.cloudinary.com/dtmln7c4k/image/upload/v1588024303/raccbfopsqvlr5dpmodt.jpg" alt="Logo">
                </div>
            <p style="text-align: center;"><small>Click aquí para agregar una foto.</small></p>
        </div>
        <div class="col-lg-12 col-xl-6">
            <form>
                <input type="text" id="inputTitle" v-model="currentProduct.name" name="utitle" style="font-size: 40px" class="form-control inputs" placeholder="Nombre del Producto" required autofocus>
                <hr class="divider">
                <div class="row" style="margin-top: 20px">
                    <div class="col-lg-12 col-xl-6">
                        <label class="typo__label d-none">A qué Familia pertenece?</label>
                        <multiselect v-model="currentProduct.familia" tag-placeholder="Crear nueva familia"  :taggable="true" @tag="addTagFamily" placeholder="Busca o agrega una Familia" label="name" track-by="id" :options="allFamiliesList()" :multiple="true"></multiselect>
                    </div>
                    <div class="col-lg-12 col-xl-6">
                        <label class="typo__label d-none">Qué Marca es?</label>
                        <multiselect v-model="currentProduct.brand" tag-placeholder="Crear nueva marca"  :taggable="true" @tag="addTagBrand" placeholder="Busca o agrega una Marca" label="name" track-by="id" :options="allBrandsList()" :multiple="true"></multiselect>
                    </div>
                </div>
                <hr class="divider">
                <div class="container">
                    <div class="comment">
                        <textarea class="textinput" id="inputDescription" v-model="currentProduct.description" style="font-size: 20px" name="udescripction" rows="3" placeholder="Descripción del Producto..."></textarea>
                    </div>
                </div>
                <hr class="divider">
                <div style="margin-left: -15px !important; margin-right: -15px !important;" class="row">
                    <ul class="ks-cboxtags">
                       <li><input type="checkbox" id="checkboxSucursal" v-on:click="checkSucursal($event)" value="sucursal" checked><label for="checkboxSucursal">Suele estar en Sucursal</label></li>
                       <li><input type="checkbox" id="checkboxPedido" @change="checkSucursal($event)" value="pedido"><label for="checkboxPedido">Solamente Bajo Pedido</label></li>
                    </ul>
                 </div>
                 <hr class="divider">
                <div class="form-check mb-3">
                    {{ form_widget(form.id, {'attr': {'class': 'form-check-input d-block', "v-model": "currentProduct.id"}})}}
                    {{ form_widget(form.familiaId, {'attr': {'class': 'form-check-input d-block', "v-model": "currentProduct.familia.map(function(elem){ return elem.id; }).join(',')"}})}}
                    {{ form_widget(form.marcaId, {'attr': {'class': 'form-check-input d-block', "v-model": "currentProduct.brand.map(function(elem){ return elem.id; }).join(',')"}})}}
                    {{ form_widget(form.familiaName, {'attr': {'class': 'form-check-input d-block', "v-model": "currentProduct.familia.map(function(elem){ return elem.name; }).join(',')"}})}}
                    {{ form_widget(form.marcaName, {'attr': {'class': 'form-check-input d-block', "v-model": "currentProduct.brand.map(function(elem){ return elem.name; }).join(',')"}})}}
                    {{ form_widget(form.name, {'attr': {'class': 'form-check-input d-block', "v-model": "currentProduct.name"}})}}
                    {{ form_widget(form.description, {'attr': {'class': 'form-check-input d-block', "v-model": "currentProduct.description"}})}}
                    {{ form_widget(form.inStock, {'attr': {'class': 'form-check-input d-block', "v-model": "currentProduct.inStock"}})}}
                    {{ form_widget(form.imageLink, {'attr': {'class': 'form-check-input d-block', "v-model": "currentProduct.imageUrl"}})}}
                    
                </div>
                {{ form_widget(form.submit, {'attr': {'class': 'btn btn-primary-outline'}})}} 
            </form>
    {{ form_end(form) }}
            
        </div>
    </div>
    <div role="alert" aria-live="assertive" aria-atomic="true" class="toast" data-delay="4000" data-animation="true">
        <div class="toast-header">
            <i class="far fa-check-circle"> </i>
            <strong class="mr-auto">&nbsp Well done!</strong>
            <small>Now</small>
            <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="toast-body">
            Product added successfully!.
        </div>
    </div>
</div>
{% endblock %}

{% block javascripts %}
{{ parent() }}
    <script src="/js/createProduct.js"></script>
    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script> 
    <script>
        var familiesArr = [];
        {% for family in families %}
            var fam = { name: "{{family.name}}", id: "{{family.id}}"};
            familiesArr.push(fam);
        {% endfor %}
        var brandsArr = [];
        {% for brand in brands %}
            var bra = { name: "{{brand.name}}", id: "{{brand.id}}"};
            brandsArr.push(bra);
        {% endfor %}
    </script>
{% endblock %}
